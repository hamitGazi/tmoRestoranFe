<p-toolbar class="mt-0">
  <div class="border-round font-bold flex align-items-center justify-content-center" style="margin-right: 5px;">
    <p-button
      class="buttonRefresh"
      icon="pi pi-refresh"
      (click)="resetFilter()"
      [style]="{'background-color': '#4087be'}">
    </p-button>
  </div>
</p-toolbar>

<form [formGroup]="raporFilterForm">
  <div class="formgrid grid mb-3">
    <div class="field col-12 md:col-4">
      <label >Başlangıç Tarihi</label>
      <p-calendar
        id="tarihBaslangic"
        formControlName="tarihBaslangic"
        dateFormat="dd/mm/yy"

        class="w-full">
      </p-calendar>
    </div>
    <div class="field col-12 md:col-4">
      <label >Bitiş Tarihi</label>
      <p-calendar
        id="tarihBitis"
        formControlName="tarihBitis"
        dateFormat="dd/mm/yy"

        class="w-full">
      </p-calendar>
    </div>
    <div class="field col-12 md:col-4">
      <label for="odemeTuru">Ödeme Türü</label>
      <p-select
        id="odemeTuru"
        [options]="odemeTurOptions()"
        optionLabel="label"
        optionValue="name"
        formControlName="odemeTuru"
        class="w-full"
        placeholder="Ödeme türü seçiniz"
        [showClear]="true">
      </p-select>
    </div>
    <div class="field col-12">
      <p-button
        label="Filtrele"
        icon="pi pi-filter"
        (click)="filterRapor()"
        [style]="{'background-color': '#28a745'}">
      </p-button>
    </div>
  </div>
</form>

<p-table
  [value]="raporDatas()"
  styleClass="p-datatable-striped">
  <ng-template pTemplate="header">
    <tr>
      <th>#</th>
      <th>Tarih</th>
      <th>Ödeme Türü</th>
      <th>Toplam Tutar</th>
      <th>Sipariş Sayısı</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-rapor let-i="rowIndex">
    <tr>
      <td>{{ i + 1 }}</td>
      <<!--td>{{ rapor.tarih | date:'dd/MM/yyyy' }}</td>
      <td>{{ odemeTurOptions().find(tur => tur.name === rapor.odemeTuru)?.label || rapor.odemeTuru }}</td>-->
      <td>{{ rapor.toplamTutar }}</td>
      <td>{{ rapor.siparisSayisi }}</td>
    </tr>
  </ng-template>
</p-table>

<div class="card">
  <h3>Satış Raporu Grafiği</h3>
  <p-chart type="bar" [data]="denemeData()" [options]="chartOptions"></p-chart>
</div>

<p-toast></p-toast>
